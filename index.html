<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø§Ø±Ø© â€” Ù…ÙØ§Ø¬Ø£Ø©! ğŸ‰</title>

  <!-- Ø®Ø· Ø¹Ø±Ø¨ÙŠ Ø¬Ù…ÙŠÙ„ -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;700;900&display=swap" rel="stylesheet">

  <!-- confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      --bg1: linear-gradient(135deg,#fff7fb 0%, #f9f0ff 50%, #fffaf0 100%);
      --accent:#ff6b9a;
      --accent2:#6b8bff;
      --glass: rgba(255,255,255,0.78);
      --card-radius:22px;
      --shadow: 0 14px 35px rgba(20,20,40,0.08);
      --font: 'Cairo', system-ui, sans-serif;
      --accent-contrast: #fff;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:var(--font);background:var(--bg1);color:#202028;direction:rtl;}
    a{color:inherit;text-decoration:none}
    .app{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px;position:relative;}
    .container{width:100%;max-width:1100px;background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));border-radius:24px;padding:16px;box-shadow:var(--shadow);overflow:hidden}
    .nav{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-bottom:12px}
    .logo{display:flex;gap:10px;align-items:center;font-weight:900;font-size:18px;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .nav-btn{background:transparent;border:1px solid rgba(30,30,60,0.06);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}
    .nav-btn.active{ background:linear-gradient(90deg,var(--accent),var(--accent2)); color:var(--accent-contrast); border:none; box-shadow:0 8px 20px rgba(100,60,120,0.08); }
    .grid{display:grid;grid-template-columns:1fr 420px;gap:18px;align-items:start}
    @media(max-width:980px){ .grid{grid-template-columns:1fr} .right{order:-1} }
    .left{padding:12px 6px}
    .title-block{display:flex;gap:12px;align-items:center;margin-bottom:8px}
    .title-block h1{margin:0;font-size:30px;line-height:1.05;font-weight:900}
    .subtitle{color:#666;margin:6px 0 16px 0}
    .card{background:var(--glass);border-radius:18px;padding:16px;box-shadow:0 8px 30px rgba(20,20,40,0.04)}
    .emoji-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;font-size:20px;margin-top:10px}
    .countdown{display:flex;gap:10px;align-items:center;margin-top:14px}
    .circle{width:84px;height:84px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:22px;background:linear-gradient(180deg,#fff,rgba(255,255,255,0.86));box-shadow:0 10px 25px rgba(30,20,60,0.06)}
    .label{font-size:13px;color:#666}
    .right{display:flex;flex-direction:column;gap:12px;align-items:center;padding:6px}
    .hero-photo{width:100%;max-width:360px;border-radius:18px;overflow:hidden;border:6px solid rgba(255,255,255,0.6);box-shadow:0 14px 40px rgba(0,0,0,0.08)}
    .hero-photo img{width:100%;display:block}
    .big-btn{width:100%;padding:12px 16px;border-radius:12px;border:none;font-weight:800;cursor:pointer;font-size:16px;background:linear-gradient(90deg,var(--accent),#ff9ab6);color:white;box-shadow:0 12px 30px rgba(255,107,154,0.12)}
    .big-btn.secondary{background:linear-gradient(90deg,#7da4ff,#6b8bff);box-shadow:0 12px 30px rgba(107,139,255,0.08)}
    .carousel{position:relative;overflow:hidden;border-radius:14px;margin-top:12px}
    .slides{display:flex;transition:transform .42s cubic-bezier(.2,.9,.2,1);gap:10px;padding:12px}
    .slide{min-width:220px;border-radius:12px;overflow:hidden;background:#fff;box-shadow:0 8px 24px rgba(20,20,40,0.04)}
    .slide img{width:100%;height:150px;object-fit:cover;display:block}
    .carousel-controls{display:flex;gap:8px;margin-top:8px;align-items:center}
    .quiz-list{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .q-card{padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fffaf2);box-shadow:0 8px 20px rgba(30,20,60,0.04)}
    .answers{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .answer-btn{padding:8px 10px;border-radius:10px;border:1px solid rgba(30,30,60,0.06);cursor:pointer;font-weight:700;background:transparent}
    .points{font-weight:900;font-size:20px;color:var(--accent)}
    .print-only{display:none}
    @media print{
      body *{visibility:visible}
      .no-print, .nav, .right, .carousel-controls, .big-btn, .no-print *{display:none !important;visibility:hidden !important}
      .container{box-shadow:none;border-radius:0}
      .print-only{display:block}
    }
    .muted{color:#7a7a8a;font-size:13px}
    .center{text-align:center}
    .hidden{display:none !important}
    .wiggle{display:inline-block;animation:wig 1.6s infinite;transform-origin:center}
    @keyframes wig{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .modal-back{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:120;background:linear-gradient(180deg, rgba(3,3,12,0.45), rgba(3,3,12,0.6));backdrop-filter: blur(4px)}
    .modal{width:calc(100% - 40px);max-width:760px;background:linear-gradient(180deg,#fff,#fff);border-radius:16px;padding:20px;text-align:center;box-shadow:0 30px 80px rgba(0,0,0,0.45);transform:translateY(20px);opacity:0;transition:all .26s}
    .modal.show{transform:none;opacity:1}
    .small{font-size:13px;color:#666}
    /* helpers for editing */
    .hint{font-size:13px;color:#666;margin-top:6px}
  </style>
</head>
<body>

<div class="app">
  <div class="container" role="application" aria-label="Ù…ÙˆÙ‚Ø¹ Ù…ÙØ§Ø¬Ø£Ø© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯">

    <!-- NAV -->
    <div class="nav no-print">
      <div style="display:flex;gap:12px;align-items:center">
        <div class="logo">ğŸ‚ Ù…ÙØ§Ø¬Ø£Ø© Ø³Ø§Ø±Ø©</div>
        <div class="muted">ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ â€¢ Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¬ÙˆØ§Ù„</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button class="nav-btn active" data-view="home" id="navHome">Ø§Ù„ØºÙ„Ø§Ù</button>
        <button class="nav-btn" data-view="gallery" id="navGallery">Ø§Ù„Ù…Ø¹Ø±Ø¶</button>
        <button class="nav-btn" data-view="games" id="navGames">Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª</button>
        <button class="nav-btn" id="printBtn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø·Ø§Ù‚Ø©</button>
      </div>
    </div>

    <!-- GRID -->
    <div class="grid">

      <!-- LEFT (views) -->
      <div class="left">

        <!-- HOME -->
        <div id="view-home" class="view">
          <div class="title-block">
            <h1 id="mainTitle">Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ ÙŠØ§ Ø³Ø§Ø±Ø©! ğŸ‰</h1>
            <div class="muted">â€” Ù…ÙØ§Ø¬Ø£Ø© Ø®Ø§ØµØ©</div>
          </div>
          <p class="subtitle">Ø¹Ø¯Ù‘Ø§Ø¯ 10 Ø«ÙˆØ§Ù†Ù ÙŠÙØªØ­ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ â€” Ø£Ùˆ Ø§Ø¶ØºØ·ÙŠ "Ø§ÙØªØ­ Ø§Ù„Ø¢Ù†".</p>

          <div class="card center">
            <div style="font-size:46px">ğŸˆ</div>
            <div class="muted" style="margin-top:6px">Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†</div>

            <div class="countdown" style="justify-content:center;margin-top:12px">
              <div class="circle" id="countCircle">10</div>
              <div class="label">
                <div style="font-weight:800">Ø«ÙˆØ§Ù†Ù</div>
                <div class="muted">Ø­ØªÙ‰ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø©</div>
              </div>
            </div>

            <div class="emoji-row" style="margin-top:12px">
              <span class="wiggle">ğŸ’–</span><span class="wiggle">ğŸ‚</span><span class="wiggle">ğŸ¶</span><span class="wiggle">âœ¨</span>
            </div>

            <div style="margin-top:12px;display:flex;gap:8px;justify-content:center" class="no-print">
              <button class="big-btn" id="openNow">Ø§ÙØªØ­ Ø§Ù„Ø¢Ù†</button>
              <button class="big-btn secondary" id="toggleVoice">â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØµÙˆØªÙŠØ©</button>
            </div>

            <div class="hint">ØªÙ„Ù…ÙŠØ­: Ø§Ù†ØªÙ‚Ù„ÙŠ Ø¥Ù„Ù‰ "Ø§Ù„Ù…Ø¹Ø±Ø¶" ÙˆØ§Ø¨Ø­Ø«ÙŠ Ø¹Ù† Ø§Ù„Ù‚Ù„Ø¨ â€” Ø§Ø¶ØºØ·ÙŠÙ‡ 7 Ù…Ø±Ø§Øª Ù„Ù…ÙØ§Ø¬Ø£Ø© Ø³Ø±ÙŠØ©.</div>
          </div>
        </div>

        <!-- GALLERY -->
        <div id="view-gallery" class="view hidden">
          <div class="title-block"><h1>Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</h1><div class="muted">Ø§Ø³Ø­Ø¨ÙŠ Ø§Ù„ØµÙˆØ± Ø£Ùˆ Ø§Ù†ØªØ¸Ø±ÙŠ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</div></div>

          <div class="card">
            <div class="carousel" id="carousel">
              <div class="slides" id="slides">
                <!-- Ø£Ù…Ø§ÙƒÙ† ÙØ§Ø±ØºØ© Ù„Ù„ØµÙˆØ±: Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØµÙÙˆÙØ© ÙÙŠ Ø§Ù„Ø³ÙƒØ±Ø¨Øª -->
                <!-- Default placeholders (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹) -->
                <div class="slide"><img src="https://via.placeholder.com/600x400?text=ØµÙˆØ±Ø©+1" alt="pic1"></div>
                <div class="slide"><img src="https://via.placeholder.com/600x400?text=ØµÙˆØ±Ø©+2" alt="pic2"></div>
                <div class="slide"><img src="https://via.placeholder.com/600x400?text=ØµÙˆØ±Ø©+3" alt="pic3"></div>
              </div>
            </div>

            <div class="carousel-controls no-print" style="justify-content:space-between;align-items:center;margin-top:8px">
              <div>
                <button class="nav-btn" id="prevSlide">â—€</button>
                <button class="nav-btn" id="nextSlide">â–¶</button>
              </div>
              <div class="muted">Ø§Ø³Ø­Ø¨ Ø¨Ø§Ù„Ø¥ØµØ¨Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ â€¢ ÙŠØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>
            </div>

            <div style="margin-top:12px;text-align:center">
              <button id="galleryHeart" class="nav-btn">ğŸ’— Ø§Ø¶ØºØ·ÙŠ Ø§Ù„Ù‚Ù„Ø¨ (Ø³Ø±)</button>
              <div id="gallerySecret" class="muted" style="margin-top:8px;display:none">ØªÙ… Ø§Ù„ÙƒØ´Ù! Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø¨ØµÙˆØ±Ùƒ Ø§Ù„Ø®Ø§ØµØ©.</div>
            </div>
          </div>
        </div>

        <!-- GAMES -->
        <div id="view-games" class="view hidden">
          <div class="title-block"><h1>Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ÙˆØ§Ù„Ø£Ù„Ø¹Ø§Ø¨</h1><div class="muted">Ø£Ø¬Ø¨Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ÙƒØ³Ø¨ Ù†Ù‚Ø§Ø·</div></div>

          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <div style="font-weight:900">Ù†Ù‚Ø§Ø·Ùƒ: <span class="points" id="points">0</span></div>
                <div class="muted">Ø§Ø¬Ù…Ø¹ Ù†Ù‚Ø§Ø·Ù‹Ø§ Ù„ØªØ­ØµÙ„ÙŠ Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ£Ø©</div>
              </div>
              <div><button class="nav-btn" id="resetGame">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button></div>
            </div>

            <div class="quiz-list" id="quizList">
              <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø³ØªÙÙ†Ø´Ø£ Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠØ§Ù‹ -->
            </div>

            <div style="margin-top:12px;text-align:center">
              <button class="big-btn" id="claimReward">Ø§Ø¯Ù‘Ø¹ÙŠ Ø¬Ø§Ø¦Ø²ØªÙƒ</button>
              <div id="rewardBox" style="margin-top:10px"></div>
            </div>
          </div>
        </div>

      </div>

      <!-- RIGHT -->
      <div class="right no-print">
        <div class="hero-photo" title="ØµÙˆØ±Ø© Ø³Ø§Ø±Ø©">
          <img id="heroImg" src="https://via.placeholder.com/800x800?text=ØµÙˆØ±Ø©+Ø³Ø§Ø±Ø©" alt="sara photo">
        </div>

        <div style="width:100%">
          <button class="big-btn" id="surpriseBtn">ğŸ Ø§ÙØªØ­ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø©</button>
          <button class="big-btn secondary" id="playVoice">ğŸ”Š ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
        </div>

        <div style="margin-top:8px;width:100%;display:flex;gap:8px">
          <button class="nav-btn" id="shareBtn">ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ©</button>
          <button class="nav-btn" id="downloadBtn">ğŸ“¸ ØµÙˆØ±/ØªØ­Ù…ÙŠÙ„</button>
        </div>

        <div style="margin-top:12px;font-size:13px;color:#666;text-align:center">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØµÙˆØªÙŠØ© Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙƒØ±Ø¨Øª.</div>
      </div>

    </div>

    <!-- footer -->
    <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center" class="no-print">
      <div class="muted">Ù…ØµÙ…Ù… Ø¨Ø­Ø¨ â€” Ø£Ø¶Ù ØµÙˆØ±Ùƒ ÙˆØ±Ø³Ø§Ù„ØªÙƒ Ø§Ù„ØµÙˆØªÙŠØ© Ø¨Ø³Ù‡ÙˆÙ„Ø©</div>
      <div class="muted">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø±ÙØ¹ Ø¹Ù„Ù‰ GitHub Pages</div>
    </div>

  </div>
</div>

<!-- Modal (Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø©) -->
<div id="modalBack" class="modal-back" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal" id="modalBox" role="document" aria-labelledby="modalTitle">
    <div style="font-size:56px">ğŸ‰</div>
    <h2 id="modalTitle">Ù…ÙØ§Ø¬Ø£Ø©! ÙƒÙ„ Ø³Ù†Ø© ÙˆØ§Ù†ØªÙŠ Ø·ÙŠØ¨Ø© ÙŠØ§ Ø³Ø§Ø±Ø© ğŸ‚</h2>
    <p id="modalMessage">Ø£ØªÙ…Ù†Ù‰ Ù„ÙƒÙ Ø³Ù†Ø© Ù…Ù„ÙŠØ§Ù†Ø© Ø­Ø¨ ÙˆÙ†Ø¬Ø§Ø­Ø§Øª ÙˆØ°ÙƒØ±ÙŠØ§Øª Ø¬Ù…ÙŠÙ„Ø©!</p>

    <div style="margin-top:12px;display:flex;gap:10px;justify-content:center">
      <button class="big-btn" id="confettiBtn">Ø§Ù†Ø«Ø±ÙŠ Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ âœ¨</button>
      <button class="big-btn secondary" id="closeModal">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div id="modalReward" style="margin-top:14px;display:none"></div>
  </div>
</div>

<!-- audio message: Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù€ src Ø¨Ø±Ø§Ø¨Ø· Ù…Ù„Ù mp3 Ø®Ø§Øµ Ø¨Ùƒ -->
<audio id="voiceMessage" preload="auto">
  <source src="https://cdn.pixabay.com/download/audio/2021/09/16/audio_8a4d7c0b82.mp3?filename=happy-birthday-song-10928.mp3" type="audio/mpeg">
  <!-- Ø¶Ø¹ Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· Ù…Ù„ÙÙƒ Ø§Ù„ØµÙˆØªÙŠ Ø¥Ù† Ø£Ø±Ø¯Øª -->
</audio>

<script>
  /* ---------------------- Configuration (Ø¹Ø¯Ù‘Ù„ Ù‡Ù†Ø§ Ø¨Ø³Ù‡ÙˆÙ„Ø©) ---------------------- */
  const GIRL_NAME = "Ø³Ø§Ø±Ø©";
  const HERO_IMAGE = "https://via.placeholder.com/800x800?text=ØµÙˆØ±Ø©+Ø³Ø§Ø±Ø©"; // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø±Ø§Ø¨Ø· ØµÙˆØ±ØªÙƒ
  // Ù…ØµÙÙˆÙØ© ØµÙˆØ± Ø§Ù„Ù…Ø¹Ø±Ø¶: Ø¶Ø¹ Ø±ÙˆØ§Ø¨Ø·Ùƒ Ù‡Ù†Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ (Ø£Ùˆ Ø§ØªØ±Ùƒ placeholders)
  const CAROUSEL_IMAGES = [
    "https://via.placeholder.com/900x600?text=ØµÙˆØ±Ø©+1",
    "https://via.placeholder.com/900x600?text=ØµÙˆØ±Ø©+2",
    "https://via.placeholder.com/900x600?text=ØµÙˆØ±Ø©+3"
  ];
  // Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© (Ø­Ø±Ù‘Ø± Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙƒÙ…Ø§ ØªØ´Ø§Ø¡)
  const QUIZ_QUESTIONS = [
    { q: "Ù…Ø§ Ù‡ÙŠ Ø­Ù„ÙˆÙ‰ " + GIRL_NAME + " Ø§Ù„Ù…ÙØ¶Ù„Ø©ØŸ", opts: ["ØªÙˆØ±ØªØ© Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§","Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ…","Ù…Ø§ÙÙ†"], a: 0 },
    { q: "Ù…Ø§ Ù„ÙˆÙ† " + GIRL_NAME + " Ø§Ù„Ù…ÙØ¶Ù„ØŸ", opts: ["Ø£Ø­Ù…Ø±","ÙˆØ±Ø¯ÙŠ","Ø£Ø²Ø±Ù‚"], a: 1 },
    { q: "Ø£ÙŠ Ù†Ø´Ø§Ø· ØªØ­Ø¨Ù‡ Ø£ÙƒØ«Ø±ØŸ", opts: ["Ø±Ø­Ù„Ø§Øª","Ù‚Ø±Ø§Ø¡Ø©","Ø±Ù‚Øµ"], a: 0 }
  ];
  /* --------------------------------------------------------------------------- */

  // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ù‡Ù„Ø©
  document.getElementById('mainTitle').textContent = "Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ ÙŠØ§ " + GIRL_NAME + "!";
  document.getElementById('heroImg').src = HERO_IMAGE;
  document.getElementById('modalMessage').textContent = "Ø£ØªÙ…Ù†Ù‰ Ù„ÙƒÙ Ø³Ù†Ø© Ù…Ù„ÙŠØ§Ù†Ø© Ø­Ø¨ ÙˆÙØ±Ø­ ÙŠØ§ " + GIRL_NAME + " â¤ï¸";

  // ---------- SPA navigation ----------
  const views = document.querySelectorAll('.view');
  function showView(name){
    views.forEach(v => {
      if(v.id === 'view-' + name) v.classList.remove('hidden'); else v.classList.add('hidden');
    });
    document.querySelectorAll('.nav-btn').forEach(b => {
      if(b.dataset && b.dataset.view === name) b.classList.add('active'); else b.classList.remove('active');
    });
  }
  document.getElementById('navHome').addEventListener('click', ()=> showView('home'));
  document.getElementById('navGallery').addEventListener('click', ()=> showView('gallery'));
  document.getElementById('navGames').addEventListener('click', ()=> showView('games'));

  // print button
  document.getElementById('printBtn').addEventListener('click', ()=> window.print());

  // ---------- Countdown 10s ----------
  let countdown = 10;
  const countCircle = document.getElementById('countCircle');
  let countdownInterval = null;
  function startCountdown(){
    clearInterval(countdownInterval);
    countdown = 10;
    countCircle.textContent = countdown;
    countdownInterval = setInterval(() => {
      countdown--;
      if(countdown <= 0){
        clearInterval(countdownInterval);
        countCircle.textContent = 0;
        openSurprise();
      } else {
        countCircle.textContent = countdown;
      }
    }, 1000);
  }

  // open now
  document.getElementById('openNow').addEventListener('click', () => {
    clearInterval(countdownInterval);
    openSurprise();
  });

  window.addEventListener('load', () => {
    startCountdown();
    initCarousel();
    initQuiz();
    autoSlideHandle = setInterval(nextSlide, 4200);
    setTimeout(()=> updateCarousel(), 300);
  });

  // ---------- Modal logic ----------
  const modalBack = document.getElementById('modalBack');
  const modalBox = document.getElementById('modalBox');
  document.getElementById('surpriseBtn').addEventListener('click', openSurprise);
  document.getElementById('closeModal').addEventListener('click', closeModal);
  modalBack.addEventListener('click', (e)=> { if(e.target===modalBack) closeModal(); });
  function openSurprise(){
    modalBack.style.display = 'flex';
    setTimeout(()=> modalBox.classList.add('show'), 20);
    modalBack.setAttribute('aria-hidden','false');
    confetti({ particleCount: 120, spread: 160, origin: { y: 0.2 } });
    confetti({ particleCount: 80, spread: 120, origin: { x: 0.6, y: 0.4 } });
    focusClose();
  }
  function closeModal(){
    modalBox.classList.remove('show');
    setTimeout(()=> { modalBack.style.display = 'none'; modalBack.setAttribute('aria-hidden','true'); }, 260);
  }
  document.addEventListener('keydown', (e)=> { if(e.key === 'Escape') closeModal(); });

  document.getElementById('confettiBtn').addEventListener('click', ()=> confetti({ particleCount: 200, spread: 200 }));

  // ---------- Audio message ----------
  const voice = document.getElementById('voiceMessage');
  const playVoiceBtn = document.getElementById('playVoice');
  const toggleVoiceBtn = document.getElementById('toggleVoice');

  playVoiceBtn.addEventListener('click', async () => {
    try{
      if(voice.paused){
        await voice.play();
        playVoiceBtn.textContent = "â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©";
      } else {
        voice.pause();
        playVoiceBtn.textContent = "ğŸ”Š ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø©";
      }
    }catch(e){ alert("Ø§Ù„Ù…ØªØµÙØ­ Ù‚Ø¯ ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ â€” Ø§Ø¶ØºØ·ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ù„Ø³Ù…Ø§Ø­."); }
  });
  toggleVoiceBtn.addEventListener('click', ()=> playVoiceBtn.click());

  // ---------- Carousel ----------
  const slidesEl = document.getElementById('slides');
  let currentIndex = 0;
  let autoSlideHandle = null;

  function initCarousel(){
    // populate from CAROUSEL_IMAGES if placeholders present
    const existing = slidesEl.querySelectorAll('.slide');
    if(existing.length === 0){
      CAROUSEL_IMAGES.forEach(src => {
        const s = document.createElement('div'); s.className='slide';
        const img = document.createElement('img'); img.src = src;
        s.appendChild(img); slidesEl.appendChild(s);
      });
    } else {
      // replace placeholder images with CAROUSEL_IMAGES if provided
      const imgs = slidesEl.querySelectorAll('img');
      CAROUSEL_IMAGES.forEach((src,i) => { if(imgs[i]) imgs[i].src = src; });
    }

    // touch handling
    let startX = 0, isDown=false;
    slidesEl.addEventListener('pointerdown', (e)=> { isDown=true; startX = e.clientX; slidesEl.style.transition = 'none'; });
    window.addEventListener('pointerup', (e)=> {
      if(!isDown) return;
      isDown=false; slidesEl.style.transition = '';
      const diff = e.clientX - startX;
      if(diff < -30) nextSlide(); else if(diff > 30) prevSlide();
    });
    updateCarousel();
  }

  function updateCarousel(){
    const child = slidesEl.children[0];
    if(!child) return;
    const slideWidth = child.offsetWidth + 10;
    slidesEl.style.transform = `translateX(${-currentIndex * slideWidth}px)`;
  }

  function nextSlide(){
    currentIndex = Math.min(currentIndex + 1, slidesEl.children.length - 1);
    if(currentIndex >= slidesEl.children.length) currentIndex = 0;
    updateCarousel();
  }
  function prevSlide(){
    currentIndex = Math.max(currentIndex - 1, 0);
    updateCarousel();
  }
  document.getElementById('nextSlide').addEventListener('click', ()=> { nextSlide(); resetAutoSlide(); });
  document.getElementById('prevSlide').addEventListener('click', ()=> { prevSlide(); resetAutoSlide(); });

  function resetAutoSlide(){
    clearInterval(autoSlideHandle);
    autoSlideHandle = setInterval(nextSlide, 4200);
  }
  window.addEventListener('resize', updateCarousel);

  // ---------- Gallery secret heart ----------
  let galleryHeartCount = 0;
  document.getElementById('galleryHeart').addEventListener('click', ()=> {
    galleryHeartCount++;
    if(galleryHeartCount >= 7){
      document.getElementById('gallerySecret').style.display = 'block';
      confetti({ particleCount: 140, spread: 180 });
      document.getElementById('galleryHeart').textContent = "ğŸ’— ØªÙ… Ø§Ù„ÙƒØ´Ù!";
    } else {
      document.getElementById('galleryHeart').textContent = `ğŸ’— Ø§Ø¶ØºØ·ÙŠ Ø§Ù„Ù‚Ù„Ø¨ (${galleryHeartCount})`;
    }
  });

  // ---------- Sharing / download placeholders ----------
  document.getElementById('shareBtn').addEventListener('click', ()=> {
    if(navigator.share){
      navigator.share({ title: 'Ù…ÙØ§Ø¬Ø£Ø© Ù„Ù€ ' + GIRL_NAME, text: 'Ø§ÙØªØ­ÙˆØ§ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© Ù„Ù€ ' + GIRL_NAME, url: location.href }).catch(()=>{});
    } else {
      navigator.clipboard?.writeText(location.href).then(()=> alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø©! Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡.'));
    }
  });
  document.getElementById('downloadBtn').addEventListener('click', ()=> {
    alert('Ø¶Ø¹ Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„ØµÙˆØ± Ø£Ùˆ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙ†Ø²ÙŠÙ„.');
  });

  // ---------- QUIZ / GAME ----------
  const quizList = document.getElementById('quizList');
  let points = 0;
  function initQuiz(){
    quizList.innerHTML = '';
    QUIZ_QUESTIONS.forEach((item, idx) => {
      const qcard = document.createElement('div'); qcard.className='q-card';
      const qh = document.createElement('div'); qh.style.fontWeight='800'; qh.textContent = (idx+1)+'. '+item.q;
      qcard.appendChild(qh);
      const answers = document.createElement('div'); answers.className='answers';
      item.opts.forEach((opt,i)=>{
        const b = document.createElement('button'); b.className='answer-btn'; b.textContent = opt;
        b.addEventListener('click', ()=> handleAnswer(idx,i,b));
        answers.appendChild(b);
      });
      qcard.appendChild(answers);
      quizList.appendChild(qcard);
    });
    updatePoints();
  }
  function handleAnswer(qIdx, chosen, btn){
    const q = QUIZ_QUESTIONS[qIdx];
    const parent = btn.parentElement;
    Array.from(parent.children).forEach(b=> b.disabled = true);
    if(chosen === q.a){
      points += 10;
      btn.style.borderColor = 'rgba(50,180,100,0.5)';
      btn.textContent += ' âœ“';
      confetti({ particleCount: 40, spread: 80, origin: { y: 0.4 } });
    } else {
      points -= 2;
      btn.style.borderColor = 'rgba(200,30,30,0.15)';
      btn.textContent += ' âœ•';
    }
    updatePoints();
  }
  function updatePoints(){ document.getElementById('points').textContent = points; }

  document.getElementById('resetGame').addEventListener('click', ()=> { points = 0; initQuiz(); });
  document.getElementById('claimReward').addEventListener('click', ()=> {
    const rewardBox = document.getElementById('rewardBox');
    if(points >= 20){
      rewardBox.innerHTML = `<div style="padding:12px;border-radius:12px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;font-weight:900">ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø­ØµÙ„ØªÙ Ø¹Ù„Ù‰ Ù…ÙØ§Ø¬Ø£Ø© Ø®Ø§ØµØ© â€” Ø±Ù…Ø²: SARA-LOVE</div>`;
      confetti({ particleCount: 220, spread: 220 });
      document.getElementById('modalReward').innerHTML = `<div style="padding:12px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;font-weight:800">Ù…ÙƒØ§ÙØ£ØªÙƒ: Ø±Ø³Ø§Ù„Ø© ØµÙˆØªÙŠØ© Ø®Ø§ØµØ© + Ø¨Ø·Ø§Ù‚Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©</div>`;
      document.getElementById('modalReward').style.display = 'block';
    } else {
      rewardBox.innerHTML = `<div class="muted">Ø§Ø¬Ù…Ø¹ÙŠ Ù†Ù‚Ø§Ø·Ù‹Ø§ Ø£ÙƒØ«Ø± (20 Ù†Ù‚Ø·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„) Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©.</div>`;
    }
  });

  // ---------- small helpers ----------
  // focus management for accessibility
  const closeModalBtn = document.getElementById('closeModal');
  function focusClose(){ setTimeout(()=> closeModalBtn.focus(), 300); }

  // ensure carousel positioning after images load
  window.addEventListener('load', ()=> { setTimeout(updateCarousel, 300); });

  // keyboard: Enter to open surprise when focus on button
  document.getElementById('surpriseBtn').addEventListener('keydown', (e)=> { if(e.key === 'Enter') openSurprise(); });

  // ensure function openSurprise focuses close button
  const origOpen = openSurprise;
  // override safe: we already defined openSurprise; ensure focusClose called inside it (done above)

  // orientation change
  window.addEventListener('orientationchange', updateCarousel);
</script>

</body>
  </html>
