here<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ŸÖŸÅÿßÿ¨ÿ£ÿ© ÿ≥ÿßÿ±ÿ© ‚Äî Ready</title>
<style>
  :root{
    --bg1:#05051a; --bg2:#180428;
    --accent:#ff3f7a; --paper:#fff9f6;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Cairo", Arial; background: linear-gradient(180deg,var(--bg1),var(--bg2)); color:#fff; overflow:hidden}

  /* canvas fills screen for stars + meteors */
  #spaceCanvas { position:fixed; inset:0; z-index:0; display:block; }

  /* center area */
  .wrap { position:relative; z-index:5; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px; }
  .card { width:360px; max-width:92%; padding:18px; border-radius:16px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow: 0 30px 90px rgba(0,0,0,0.6); text-align:center; }

  .title { font-weight:700; font-size:20px; color:#ffdfe9; margin-bottom:6px; }
  .subtitle { font-size:13px; color:rgba(220,190,200,0.9); margin-bottom:18px; }

  /* envelope 3d */
  .envelope-wrap { display:flex; align-items:center; justify-content:center; margin:8px 0; perspective:1400px; }
  .envelope { width:300px; height:200px; border-radius:14px; position:relative; transform-style:preserve-3d; transition: transform .45s cubic-bezier(.2,.9,.2,1); background: linear-gradient(180deg,#ffebf0,#ffe8ef); box-shadow: inset 0 8px 30px rgba(255,255,255,0.08), 0 26px 60px rgba(3,2,6,0.6); }
  .flap { position:absolute; left:0; right:0; top:0; height:56%; background: linear-gradient(180deg,#ffbfd2,#ff84a8); clip-path: polygon(0 0, 50% 74%, 100% 0); transform-origin:50% 0; transition: transform .9s cubic-bezier(.18,.9,.28,1); box-shadow: 0 10px 30px rgba(255,60,140,0.06); z-index:6; }
  .body-face { position:absolute; left:0; right:0; bottom:0; top:44%; background:transparent; border-top-left-radius:12px; border-top-right-radius:12px; z-index:3; }

  /* seal */
  .seal { position:absolute; left:50%; transform:translateX(-50%); bottom:16px; width:64px; height:64px; border-radius:50%; background: radial-gradient(circle at 28% 24%, #ffdfe6 0%, #ffb2c8 10%, var(--accent) 60%, #7a102b 100%); display:flex; align-items:center; justify-content:center; font-weight:900; font-size:22px; color:#fff; z-index:8; cursor:pointer; box-shadow:0 12px 36px rgba(255,40,120,0.12); }

  /* letter hidden inside */
  .letter { position:absolute; left:50%; top:12%; transform:translateX(-50%) translateY(24%); width:85%; height:66%; background:linear-gradient(180deg,#fffaf7,#fff1f3); border-radius:10px; padding:14px; box-shadow:0 18px 50px rgba(20,20,40,0.06); opacity:0; transition: transform .9s cubic-bezier(.2,.9,.2,1), opacity .6s; z-index:4; color:#3b2a30; border:2px solid rgba(255,120,180,0.08); overflow:auto; font-weight:700; line-height:1.5; }

  /* open state */
  .envelope.open { transform: translateY(-8px); }
  .envelope.open .flap { transform: rotateX(-170deg) translateY(-6px); }
  .envelope.open .letter { transform: translateX(-50%) translateY(-140%); opacity:1; z-index:10; }

  /* controls */
  .controls { margin-top:14px; display:flex; gap:10px; justify-content:center; }
  .btn { padding:10px 16px; border-radius:999px; border:none; cursor:pointer; font-weight:800; background: linear-gradient(90deg,var(--accent),#ff86b1); color:#fff; box-shadow:0 12px 36px rgba(255,60,150,0.1); }
  .btn.secondary { background:transparent; border:1px dashed rgba(255,255,255,0.06); color:rgba(240,200,220,0.9) }

  /* typed text style */
  .typed{ white-space: pre-wrap; font-size:15px; text-align:right }

  /* confetti container */
  #confetti{ position: absolute; inset:0; pointer-events:none; z-index:30; }

  /* accessibility focus */
  .envelope:focus { outline: 3px solid rgba(255,79,138,0.14); }

  @media(max-width:420px){
    .envelope { width:86vw; height:54vw; }
    .card { width:92vw; padding:14px; }
  }
</style>
</head>
<body>

<canvas id="spaceCanvas" aria-hidden="true"></canvas>

<div class="wrap">
  <div class="card" role="main" aria-label="ŸÖŸÅÿßÿ¨ÿ£ÿ© ÿπŸäÿØ ŸÖŸäŸÑÿßÿØ">
    <div class="title">ŸÖŸÅÿßÿ¨ÿ£ÿ© ŸÉŸàŸÜŸäÿ© ‚Äî ÿ≥ÿßÿ±ÿ©</div>
    <div class="subtitle">ÿßÿ∂ÿ∫ÿ∑Ÿä ÿπŸÑŸâ ÿßŸÑÿ∏ÿ±ŸÅ ŸÑŸÅÿ™ÿ≠ ÿßŸÑŸÖŸÅÿßÿ¨ÿ£ÿ©</div>

    <div class="envelope-wrap" style="display:flex;justify-content:center">
      <div class="envelope" id="env" role="button" tabindex="0" aria-pressed="false">
        <div class="flap" id="flap"></div>
        <div class="body-face"></div>

        <div class="letter" id="letter" aria-hidden="true">
          <div class="typed" id="typedText"></div>
        </div>

        <div class="seal" id="seal" title="ÿßŸÅÿ™ÿ≠/ÿßŸÇŸÅŸÑ">‚ù§</div>
      </div>
    </div>

    <div class="controls">
      <button class="btn" id="openBtn">ÿ£ŸÅÿ™ÿ≠</button>
      <button class="btn secondary" id="resetBtn">ÿ•ÿπÿßÿØÿ©</button>
    </div>

    <div id="confetti" aria-hidden="true"></div>
  </div>
</div>

<script>
/* ----------------------------
   Canvas starfield + meteors
   ---------------------------- */
const canvas = document.getElementById('spaceCanvas');
const ctx = canvas.getContext('2d');
let W = innerWidth, H = innerHeight;
function resize(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight; }
window.addEventListener('resize', resize);
resize();

function rand(min,max){ return Math.random()*(max-min)+min; }

/* stars */
let stars = [];
function initStars(n=240){
  stars = [];
  for(let i=0;i<n;i++){
    stars.push({ x: Math.random()*W, y: Math.random()*H, r: Math.random()*1.6, alpha: 0.2 + Math.random()*0.9, twinkle: Math.random()*2+1, phase: Math.random()*Math.PI*2 });
  }
}
initStars();

/* meteors array */
let meteors = [];
function spawnMeteor(){
  const startX = -rand(0.1*W, 0.9*W);
  const startY = -rand(0.05*H, 0.5*H);
  const len = rand(120,260);
  const speed = rand(6,12);
  meteors.push({ x:startX, y:startY, len, speed, life:0, angle: -rand(22,32)*Math.PI/180, opacity:0 });
}
setInterval(()=>{ if(Math.random() < 0.45) spawnMeteor(); }, 1200);

function draw(){
  // background soft nebula
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0, 'rgba(6,4,18,0.2)');
  g.addColorStop(1, 'rgba(24,4,48,0.45)');
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  // stars
  const t = Date.now()/1000;
  for(let s of stars){
    const alpha = 0.2 + 0.8*(0.5 + 0.5*Math.sin(t*s.twinkle + s.phase));
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${Math.min(s.alpha,alpha)})`;
    ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
    ctx.fill();
  }

  // meteors
  for(let i=meteors.length-1;i>=0;i--){
    const m = meteors[i];
    m.x += m.speed * Math.cos(m.angle) * 1.6;
    m.y += m.speed * Math.sin(m.angle) * 1.6;
    m.life += 1;
    m.opacity = Math.min(1, m.opacity + 0.06);

    ctx.save();
    ctx.translate(m.x, m.y);
    ctx.rotate(m.angle);
    const grad = ctx.createLinearGradient(-m.len,0,0,0);
    grad.addColorStop(0, 'rgba(255,255,255,0.0)');
    grad.addColorStop(0.6, 'rgba(255,180,220,0.22)');
    grad.addColorStop(1, 'rgba(255,255,255,0.96)');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.moveTo(-m.len, -1.8);
    ctx.lineTo(0, -1.8);
    ctx.lineTo(0, 1.8);
    ctx.lineTo(-m.len, 1.8);
    ctx.closePath();
    ctx.fill();
    ctx.restore();

    if(m.x > W + 200 || m.y > H + 200 || m.life > 220) meteors.splice(i,1);
  }

  requestAnimationFrame(draw);
}
draw();

/* ----------------------------
   Envelope open / typing / confetti
   ---------------------------- */
const env = document.getElementById('env');
const flap = document.getElementById('flap');
const letter = document.getElementById('letter');
const seal = document.getElementById('seal');
const openBtn = document.getElementById('openBtn');
const resetBtn = document.getElementById('resetBtn');
const typedEl = document.getElementById('typedText');
const confettiRoot = document.getElementById('confetti');

let opened = false;

/* message (Arabic lines) */
const messageLines = [
  "ÿ•ŸÑŸâ ÿ≥ÿßÿ±ÿ© üíñ",
  "ŸÉŸÑ ÿ≥ŸÜÿ© Ÿàÿ£ŸÜÿ™Ÿê ÿ®ÿÆŸäÿ± ‚Äî Ÿäÿß ÿ£ÿ¨ŸÖŸÑ ŸÜÿ¨ŸÖÿ© ŸÅŸä ÿ≥ŸÖÿßÿ¶Ÿä.",
  "ÿ£ÿ™ŸÖŸÜŸâ ŸÑŸÉŸê ÿ£ŸäÿßŸÖŸãÿß ŸÖŸÑÿ§Ÿáÿß ÿßŸÑŸÅÿ±ÿ≠ ŸàÿßŸÑÿ≠ÿ® ŸàÿßŸÑŸÜÿ¨ÿßÿ≠.",
  "ŸÖÿπ ŸÉŸÑ ÿ≠ÿ®Ÿäÿå"
];

function typeText(el, lines, speed = 28, done){
  el.innerHTML = '';
  let idx = 0;
  function nextLine(){
    if(idx >= lines.length){ if(done) done(); return; }
    const line = lines[idx++];
    const p = document.createElement('div');
    p.style.marginTop = idx===1? '0' : '8px';
    el.appendChild(p);
    let i = 0;
    const t = setInterval(()=> {
      p.textContent += (line[i++] || '');
      if(i > line.length){ clearInterval(t); setTimeout(nextLine, 220); }
    }, speed);
  }
  nextLine();
}

/* simple confetti */
function spawnConfetti(){
  const colors = ['#ff6fb3','#ffd36f','#6fefff','#9d6cff','#ff9bbd'];
  for(let i=0;i<40;i++){
    const n = document.createElement('div');
    n.style.position = 'absolute';
    n.style.left = (50 + (Math.random()*140-70)) + '%';
    n.style.top = (30 + Math.random()*20) + '%';
    const size = 6 + Math.random()*14;
    n.style.width = size + 'px';
    n.style.height = (size*0.6) + 'px';
    n.style.background = colors[Math.floor(Math.random()*colors.length)];
    n.style.borderRadius = Math.random()>0.6? '3px' : '50%';
    n.style.zIndex = 80;
    confettiRoot.appendChild(n);
    const dx = (Math.random()*300 - 150);
    const dy = - (60 + Math.random()*220);
    const rot = (Math.random()*720 - 360);
    n.animate([
      { transform: 'translateY(0) rotate(0deg)', opacity:1 },
      { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity:0 }
    ], { duration: 1000 + Math.random()*1400, easing:'cubic-bezier(.2,.9,.2,1)'});
    setTimeout(()=> n.remove(), 2600);
  }
}

/* small icons burst */
function burstSmall(){
  const icons = ['üí´','üíó','‚ú®'];
  for(let i=0;i<12;i++){
    const el = document.createElement('div');
    el.style.position='absolute';
    el.style.left = (50 + (Math.random()*120-60)) + '%';
    el.style.top = (44 + Math.random()*12) + '%';
    el.style.transform = 'translate(-50%,-50%)';
    el.style.zIndex = 80;
    el.style.fontSize = (12 + Math.random()*18) + 'px';
    el.textContent = icons[Math.floor(Math.random()*icons.length)];
    confettiRoot.appendChild(el);
    const dx = (Math.random()*120 - 60);
    const dy = - (30 + Math.random()*80);
    el.animate([
      { transform:'translate(-50%,-50%) translate(0,0)', opacity:0 },
      { transform:`translate(-50%,-50%) translate(${dx}px, ${dy}px)`, opacity:1 },
      { transform:`translate(-50%,-50%) translate(${dx*1.2}px, ${dy*1.5}px)`, opacity:0 }
    ],{ duration: 900 + Math.random()*900, easing:'cubic-bezier(.2,.9,.2,1)'});
    setTimeout(()=> el.remove(), 2200);
  }
}

/* open sequence */
function openSequence(){
  if(opened) return;
  opened = true;
  env.classList.add('open');
  env.setAttribute('aria-pressed','true');
  setTimeout(()=> {
    typeText(typedEl, messageLines, 28, ()=> {
      spawnConfetti(); burstSmall();
      seal.animate([{ transform:'scale(.86)'},{ transform:'scale(1.06)'},{ transform:'scale(1)' }], { duration:620, easing:'cubic-bezier(.2,.9,.3,1)'});
    });
  }, 480);
}

/* reset function */
function resetAll(){
  opened = false;
  env.classList.remove('open');
  env.setAttribute('aria-pressed','false');
  typedEl.innerHTML = '';
  confettiRoot.innerHTML = '';
}

/* handlers */
env.addEventListener('click', openSequence);
openBtn.addEventListener('click', openSequence);
resetBtn.addEventListener('click', resetAll);
seal.addEventListener('click', openSequence);
env.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' ') openSequence(); });
env.setAttribute('tabindex',0);

/* make stars twinkle slightly over time */
setInterval(()=> {
  for(let s of stars){ s.phase += 0.02; }
}, 120);

/* initial meteor seeding for immediate effect */
for(let i=0;i<3;i++) spawnMeteor();

</script>
</body>
</html>
